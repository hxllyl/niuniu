<div class="modal box bs-example-modal-sm" id="reg_step1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <%= form_for(User.new, as: :user, url: registration_path(:user)) do |f| %>
    <%= f.hidden_field :role, value: 'normal' %>
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title lineTitle" id=""><%= t('sign_up') %></h4>
      </div>
      <div class="modal-body">
	      <div class="buttonInput form-group">
					<%= f.text_field :mobile, class: "form-control input pr84", id: 'mobile', placeholder: "请输入手机号" %>
					<input type="button" class="btn btn-primary subBtn" id="valid_code_but" value="获取验证码" />
				</div>
        <div class="form-group">
					<%= text_field_tag :valid_code, nil, class: "form-control valid-code", id:'' , placeholder: "请输入验证码" -%>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="next-step" class="btn btn-default w100p orange" role="button" data-toggle="modal" data-target="#reg_step2" data-dismiss="modal" aria-label="Close" disabled="disabled" ><%= t('next_step') %></button>
      </div>
    </div>
  </div>
</div>

<div class="modal box bs-example-modal-sm" id="reg_step2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title lineTitle" id=""><%= t('sign_up') %></h4>
      </div>
      <div class="modal-body">
				<div class="form-group">
					<%= f.password_field :password, class: 'form-control', id: '', placeholder: '请设置密码' %>
				</div>

        <div class="form-group">
          <%= f.password_field :password_confirmation, class: "form-control", id: "", placeholder: "请重新输入密码" %>
        </div>

				<div class="form-group">
				  <%= f.text_field :name, class: 'form-control', id: '', placeholder: '请输入姓名' -%>
        </div>
				<div class="form-group">
					<%= f.text_field :company, class: "form-control", id: "", placeholder: "请输入公司名称" -%>
				</div>

				<div class="form-group">
					<div class="row">
            <div class="dropdown col-md-6">
              <%= select_tag 'province', options_for_select(areas(level: :provinces)), {class: 'form-control', id: 'province', prompt: '请选择省份'} -%>
  			    </div>
            <div class="dropdown col-md-6">
              <%= f.select :area_id, [], { prompt: '请选择城市' }, {class: 'form-control', id: 'city'} %>
            </div>
          </div>
				</div>

				<div class="checkbox">
			    <input type="checkbox"><a href="#"><%= t('user_protocol') %></a>
			  </div>
      </div>
      <div class="modal-footer">
        <%= f.submit t('finish_but'), class: 'btn btn-default w100p orange btn_spacing' -%>
      </div>
      <% end -%>
    </div>
  </div>
</div>
<%= javascript_tag do %>
var wait = 60;
$("#valid_code_but").attr("disabled",false);
function time(obj) {
    if (wait == 0) {
        $(obj).attr("disabled",false);
    $(obj).val("获取动态码");
        wait = 60;
    } else {
        $(obj).attr("disabled",true);
    $(obj).val(wait + "秒后重新获取");
        wait--;
        setTimeout(function() {
            time(obj);
        },1000)
    }
}
$("#valid_code_but").click(function(){
  time($(this));
});
<% end -%>
